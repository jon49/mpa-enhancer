(()=>{let a=document,n=window,u=a.querySelector.bind(a);function r(e,t){return e?.hasAttribute(t)}function s(){let e=a.body.getAttribute("mpa-page-name");return e||new URL(a.location.href).pathname.replace(/\/$/,"")}let d=null;n.addEventListener("click",e=>{d=e.target}),n.addEventListener("unload",()=>{let e=f()||{},t=new Set(e.__||[]),o=s();r(a.body,"mpa-persist")&&(t.add(o),e.__=Array.from(t));for(let l in Object.keys(e))t.has(l)||l==="__"||delete e[l];let c=a.activeElement,i=a.activeElement===a.body?d:c;e[o]={elY:i?.getBoundingClientRect().top,y:n.scrollY,active:{id:i?.id,name:i?.getAttribute("name")}},localStorage.pageLocations=JSON.stringify(e)});function p(){if(u("[autofocus]"))return;let e=f(s());if(!e)return;let{y:t,elY:o,active:{id:c,name:i}}=e,l=a.getElementById(c)||u(`[name="${i}"]`);r(l,"mpa-skip-focus")||(g("focus",l),g("select",l)),!r(a.body,"mpa-skip-scroll")&&t&&(l?n.scrollTo({top:n.scrollY+l.getBoundingClientRect().top-o}):n.scrollTo({top:t}))}function g(e,t){t&&t[e]&&t[e]()}function f(e){let t=localStorage.pageLocations;return t=t&&JSON.parse(t),e==null?t:t&&t[e]}p()})();
