(()=>{let l=document,a=window,n=l.querySelector.bind(l);function o(e,t){return e?.hasAttribute(t)}function r(){return new URL(l.location.href).pathname.replace(/\/$/,"")}let c=null;a.addEventListener("click",e=>{c=e.target}),a.addEventListener("beforeunload",()=>{let e=l.activeElement,t=l.activeElement===l.body?c:e;localStorage.pageLocation=JSON.stringify({href:r(),y:a.scrollY,height:l.body.scrollHeight,active:{id:t?.id,name:t?.getAttribute("name")}})});function s(){if(n("[autofocus]"))return;let e=localStorage.pageLocation;if(!e)return;let{y:t,height:d,href:f,active:{id:g,name:h}}=JSON.parse(e),i=l.getElementById(g)||n(`[name="${h}"]`);o(i,"mpa-skip-focus")||(u("focus",i),u("select",i)),!o(l.body,"mpa-skip-scroll")&&f===r()&&t&&a.scrollTo({top:t+l.body.scrollHeight-d})}function u(e,t){t&&t[e]&&t[e]()}s()})();
