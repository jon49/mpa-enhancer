(()=>{let l=document,n=window,o=l.querySelector.bind(l);function s(t,e){return t?.hasAttribute(e)}function f(t,e){return t?.getAttribute(e)}function m(){let t=f(l.body,"mpa-page-name");return t||new URL(l.location.href).pathname.replace(/\/$/,"")}let p=null;n.addEventListener("click",t=>{p=t.target});function u(t){return t?.getBoundingClientRect().top}n.addEventListener("unload",()=>{let t=y()||{},e=new Set(t.__||[]),r=m();s(l.body,"mpa-persist")&&(e.add(r),t.__=Array.from(e));for(let d in Object.keys(t))e.has(d)||d==="__"||delete t[d];let i=l.activeElement,a=i===l.body?p:i,c=f(a?.closest("[mpa-miss]"),"mpa-miss"),b=a?.getAttribute("name");t[r]={y:n.scrollY,a:{t:{y:u(a),q:a?.id&&`#${a.id}`||b&&`[name="${b}"]`},m:{y:u(o(c)),q:c}}},localStorage._mpa=JSON.stringify(t)});function q(){if(o("[autofocus]"))return;let t=y(m());if(!t)return;let{y:e,a:{t:r,m:i}}=t,a,c=r.q&&(a=o(r.q))?r.y:i.q&&(a=o(i.q))?i.y:0;s(a,"mpa-skip-focus")||(g("focus",a),g("select",a)),!s(l.body,"mpa-skip-scroll")&&e&&(a?n.scrollTo({top:n.scrollY+u(a)-c}):n.scrollTo({top:e}))}function g(t,e){e&&e[t]&&e[t]()}function y(t){let e=localStorage._mpa;return e=e&&JSON.parse(e),t==null?e:e&&e[t]}q()})();
