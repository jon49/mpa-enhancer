(()=>{let a=document,n=window,s=a.querySelector.bind(a);function u(e,t){return e?.hasAttribute(t)}function d(e,t){return e?.getAttribute(t)}function g(){let e=d(a.body,"mpa-page-name");return e||new URL(a.location.href).pathname.replace(/\/$/,"")}let p=null;n.addEventListener("click",e=>{p=e.target}),n.addEventListener("unload",()=>{let e=m()||{},t=new Set(e.__||[]),r=g();u(a.body,"mpa-persist")&&(t.add(r),e.__=Array.from(t));for(let l in Object.keys(e))t.has(l)||l==="__"||delete e[l];let c=a.activeElement,i=c===a.body?p:c;e[r]={elY:i?.getBoundingClientRect().top,y:n.scrollY,active:{id:i?.id,miss:d(i?.closest("[mpa-miss]"),"mpa-miss"),name:i?.getAttribute("name")}},localStorage.pageLocations=JSON.stringify(e)});function y(){if(s("[autofocus]"))return;let e=m(g());if(!e)return;let{y:t,elY:r,active:{id:c,name:i,miss:l}}=e,o=a.getElementById(c)||s(`[name="${i}"]`)||s(l);u(o,"mpa-skip-focus")||(f("focus",o),f("select",o)),!u(a.body,"mpa-skip-scroll")&&t&&(o?n.scrollTo({top:n.scrollY+o.getBoundingClientRect().top-r}):n.scrollTo({top:t}))}function f(e,t){t&&t[e]&&t[e]()}function m(e){let t=localStorage.pageLocations;return t=t&&JSON.parse(t),e==null?t:t&&t[e]}y()})();
