(()=>{let t=document,o=window,a=t.querySelector.bind(t);function r(){return new URL(t.location.href).pathname.replace(/\/$/,"")}o.addEventListener("beforeunload",()=>{let e=t.activeElement;localStorage.pageLocation=JSON.stringify({href:r(),y:o.scrollY,height:t.body.scrollHeight,active:{id:e?.id,name:e?.getAttribute("name")}})});function u(){if(a("[autofocus]"))return;let e=localStorage.pageLocation;if(!e)return;let{y:l,height:d,href:f,active:{id:g,name:s}}=JSON.parse(e),n=t.body.dataset.mpaScrollTo;f===r()&&(n||l)&&(n?a(n).scrollIntoView():o.scrollTo({top:l+t.body.scrollHeight-d}));let c=t.getElementById(g)||a(`[name="${s}"]`);i("focus",c),i("select",c)}function i(e,l){l[e]&&l[e]()}u()})();
